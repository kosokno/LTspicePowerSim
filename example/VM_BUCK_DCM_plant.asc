Version 4
SHEET 1 2056 1312
WIRE 624 288 400 288
WIRE 672 288 624 288
WIRE 400 320 400 288
WIRE 672 368 672 288
WIRE 400 432 400 400
WIRE 624 448 592 448
WIRE 496 464 464 464
WIRE 672 480 672 464
WIRE 672 480 592 480
WIRE 672 512 672 480
WIRE 704 512 672 512
WIRE 768 512 704 512
WIRE 944 512 848 512
WIRE 1024 512 944 512
WIRE 1040 512 1024 512
WIRE 112 560 16 560
WIRE 240 560 176 560
WIRE 272 560 240 560
WIRE 416 560 368 560
WIRE 464 560 464 464
WIRE 464 560 416 560
WIRE 944 560 944 512
WIRE 1040 560 1040 512
WIRE 672 576 672 512
WIRE 240 688 240 560
WIRE 272 688 240 688
WIRE 400 688 368 688
WIRE 672 704 672 640
WIRE 944 704 944 624
WIRE 1040 704 1040 640
WIRE 272 752 256 752
WIRE 384 752 368 752
WIRE 256 784 256 752
WIRE 384 784 384 752
FLAG 672 704 0
FLAG 400 432 0
FLAG 944 704 0
FLAG 1024 512 out
FLAG 624 288 in
FLAG 704 512 sw
FLAG 1040 704 0
FLAG 416 560 pwm
FLAG 384 784 0
FLAG 256 784 0
FLAG 400 688 out
SYMBOL ind 752 528 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {L}
SYMATTR SpiceLine Rser=10m
SYMBOL cap 928 560 R0
SYMATTR InstName C1
SYMATTR Value 2.2µ
SYMATTR SpiceLine Rser=1m
SYMBOL iGD 544 464 R0
SYMATTR InstName X2
SYMBOL res 1024 544 R0
SYMATTR InstName R1
SYMATTR Value {vout/iout}
SYMBOL PWM 320 560 R0
WINDOW 39 -59 41 Left 2
SYMATTR SpiceLine freq={fsw}
SYMATTR InstName X4
SYMBOL voltage 400 304 R0
SYMATTR InstName V1
SYMATTR Value {vin}
SYMBOL iNMOS 672 416 R0
SYMATTR InstName X7
SYMBOL iD 672 608 R180
SYMATTR InstName X3
SYMBOL CONST -16 560 R0
WINDOW 39 -2 64 Bottom 2
SYMATTR SpiceLine K={duty}
SYMATTR InstName X5
SYMBOL fra 176 560 R270
WINDOW 0 16 -32 VTop 2
SYMATTR InstName @1
SYMATTR SpiceLine delay=1m fstart=100 fend=100k oct=1 nmax=4 pp0=20m pp1=20m f0=100 f1=100k
SYMBOL fraprobe 320 768 R0
SYMATTR InstName &1plant
TEXT 624 24 Left 2 ;.tran 0 5m 0 10n
TEXT 800 360 Left 2 !.save V(out) V(sw) I(L1) V(duty)
TEXT 624 56 Left 2 !.fra
TEXT -136 -64 Left 5 ;Voltage Mode Buck DCM plant
TEXT 1072 -32 Left 2 ;2024-12-29
TEXT 920 456 Left 2 !.ic V(out)=1
TEXT 624 88 Left 2 !.step param iout list 1m 10m
TEXT -112 40 Left 2 !.param vout=1\n.param vin=5\n.param iout=1m\n.param fsw=2Meg\n.param L=10u\n.param duty=SQRT(2*L*fsw*iout*vout/(vin*(vin-vout)))
TEXT 624 120 Left 2 !.step param vin list 2.5 5
