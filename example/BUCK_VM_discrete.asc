Version 4.1
SHEET 1 2056 1312
WIRE -128 176 -160 176
WIRE 0 176 -32 176
WIRE 32 176 0 176
WIRE 144 176 128 176
WIRE 992 176 768 176
WIRE 1040 176 992 176
WIRE 768 208 768 176
WIRE -128 240 -160 240
WIRE 0 240 -32 240
WIRE 32 240 0 240
WIRE 160 240 128 240
WIRE 1040 256 1040 176
WIRE -160 272 -160 240
WIRE 0 272 0 240
WIRE 160 272 160 240
WIRE -448 304 -464 304
WIRE -368 304 -384 304
WIRE 768 320 768 288
WIRE 992 336 960 336
WIRE -368 352 -368 304
WIRE 864 352 832 352
WIRE 1040 368 1040 352
WIRE 1040 368 960 368
WIRE -368 384 -368 352
WIRE 1040 400 1040 368
WIRE 1072 400 1040 400
WIRE 1136 400 1072 400
WIRE 1312 400 1216 400
WIRE 1392 400 1312 400
WIRE 1408 400 1392 400
WIRE -432 416 -464 416
WIRE -400 416 -432 416
WIRE -304 416 -336 416
WIRE -208 416 -240 416
WIRE -112 416 -144 416
WIRE 32 416 -48 416
WIRE 320 432 256 432
WIRE 448 432 384 432
WIRE 496 432 448 432
WIRE 832 432 832 352
WIRE 832 432 784 432
WIRE 1040 432 1040 400
WIRE 32 448 0 448
WIRE 640 448 576 448
WIRE 688 448 640 448
WIRE 1312 448 1312 400
WIRE 1408 448 1408 400
WIRE 496 464 448 464
WIRE 832 464 784 464
WIRE 992 512 960 512
WIRE 832 528 832 464
WIRE 864 528 832 528
WIRE 1040 544 1040 528
WIRE 1040 544 960 544
WIRE 1040 592 1040 544
WIRE 1312 592 1312 512
WIRE 1408 592 1408 528
WIRE 304 656 176 656
WIRE 448 656 448 464
WIRE 448 656 400 656
WIRE -400 688 -480 688
WIRE -176 688 -176 448
WIRE -176 688 -240 688
WIRE -96 688 -176 688
WIRE 0 688 0 448
WIRE 0 688 -96 688
WIRE -400 720 -432 720
WIRE 96 720 -240 720
WIRE 176 720 176 656
WIRE 176 720 96 720
WIRE -432 800 -432 720
WIRE -432 800 -480 800
FLAG 1040 592 0
FLAG 768 320 0
FLAG 1312 592 0
FLAG 1392 400 out
FLAG 992 176 in
FLAG 1072 400 sw
FLAG 448 432 duty
FLAG 1408 592 0
FLAG 640 448 pwm
FLAG -464 304 out
FLAG 0 176 duty
FLAG 160 272 0
FLAG 144 176 out
FLAG 0 272 0
FLAG -160 272 0
FLAG 448 464 saw
FLAG -432 416 ref
FLAG -368 352 fb
FLAG -160 176 fb
FLAG 96 720 pwmclk
FLAG -96 688 ctrlclk
SYMBOL ind 1120 416 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 10u
SYMATTR SpiceLine Rser=10m
SYMBOL cap 1296 448 R0
SYMATTR InstName C1
SYMATTR Value 22u
SYMATTR SpiceLine Rser=1m
SYMBOL iGD 912 352 R0
SYMATTR InstName X2
SYMBOL iGD 912 528 R0
SYMATTR InstName X3
SYMBOL DEADTIME 736 448 R0
WINDOW 39 5 76 Bottom 2
SYMATTR InstName X1
SYMBOL res 1392 432 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL CONST -496 416 R0
WINDOW 39 3 25 Top 2
SYMATTR InstName X6
SYMBOL fra -384 304 R270
WINDOW 0 16 -32 VTop 2
SYMATTR InstName @1
SYMATTR SpiceLine delay=2m fstart=1k fend=100k oct=2 flist=10.7k nmax=2 pp0=20m pp1=10m f0=1k f1=100k
SYMBOL fraprobe 80 256 R0
SYMATTR InstName &1plant
SYMBOL fraprobe -80 256 R0
SYMATTR InstName &1comp
SYMBOL voltage 768 192 R0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL iNMOS 1040 304 R0
SYMATTR InstName X7
SYMBOL iNMOS 1040 480 R0
SYMATTR InstName X8
SYMBOL PowerSim\\QUANTIZE 352 432 R0
WINDOW 3 4 60 Bottom 2
WINDOW 123 3 85 Bottom 2
SYMATTR Value vh=1 vl=0
SYMATTR InstName X10
SYMBOL PowerSim\\SUB -368 416 M180
SYMATTR InstName X5
SYMBOL PowerSim\\LPF -272 416 R0
WINDOW 3 0 55 Bottom 2
SYMATTR Value f=400k
SYMATTR InstName X12
SYMBOL PowerSim\\SAMPLEHOLD -176 416 R0
SYMATTR InstName X13
SYMBOL CONST -512 688 R0
WINDOW 39 3 25 Top 2
SYMATTR SpiceLine K=2Meg
SYMATTR InstName X14
SYMBOL PowerSim\\CMP 544 448 M180
SYMATTR InstName X4
SYMBOL PowerSim\\PHASESHIFT2 -320 704 R0
SYMATTR InstName X11
SYMBOL CONST -512 800 R0
WINDOW 39 3 25 Top 2
SYMATTR SpiceLine K=30
SYMATTR InstName X15
SYMBOL PowerSim\\QUANTIZE -80 416 R0
WINDOW 3 -3 62 Bottom 2
WINDOW 123 0 85 Bottom 2
SYMATTR Value vh=1 vl=-1
SYMATTR Value2 bits=14
SYMATTR InstName X17
SYMBOL PowerSim\\SAW 352 656 R0
WINDOW 3 -3 53 Bottom 2
SYMATTR Value se=2Meg
SYMATTR InstName X16
SYMBOL PowerSim\\zPID 144 432 R0
WINDOW 39 -3 70 Bottom 2
WINDOW 3 -21 94 Bottom 2
WINDOW 123 -69 120 Bottom 2
WINDOW 40 49 119 Bottom 2
SYMATTR SpiceLine g=0.3 fz1=3k fz2=5k
SYMATTR Value2 fs=2Meg
SYMATTR InstName X18
TEXT 600 8 Left 2 !.tran 0 1m 0.99m 10n
TEXT 600 40 Left 2 ;.fra
TEXT -488 -104 Left 5 ;Discrete Time Voltage Mode Synchronous Buck
TEXT 1256 -80 Left 2 ;2025-05-31
TEXT -328 -16 Left 2 ;Vin=5V, Vout=1V/1A, fsw=2MHz
TEXT 1288 344 Left 2 !.ic V(out)=1
TEXT 1120 336 Left 2 !.ic I(L1)=0
TEXT 88 336 Left 2 ;discrete PID
TEXT -144 336 Left 2 ;A/D
TEXT 400 336 Left 2 ;DPWM
TEXT -320 24 Left 2 !.options solver="norm"\n.options method="gear"
TEXT 640 672 Left 2 ;2025-03-23      Initial release\n2025-05-31      Added .option to specify solver and integration method
RECTANGLE Normal -16 512 -224 352 2
RECTANGLE Normal 272 560 16 352 2
RECTANGLE Normal 592 752 288 352 2
