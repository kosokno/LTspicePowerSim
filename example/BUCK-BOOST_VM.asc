Version 4.1
SHEET 1 3096 1312
WIRE 1008 176 768 176
WIRE 1056 176 1008 176
WIRE 1888 176 1360 176
WIRE 1968 176 1888 176
WIRE 1984 176 1968 176
WIRE 768 208 768 176
WIRE -48 224 -128 224
WIRE 96 224 48 224
WIRE 144 224 96 224
WIRE 256 224 240 224
WIRE 1056 256 1056 176
WIRE 1360 256 1360 176
WIRE -48 288 -96 288
WIRE 96 288 48 288
WIRE 144 288 96 288
WIRE 272 288 240 288
WIRE -224 304 -288 304
WIRE -128 304 -128 224
WIRE -128 304 -160 304
WIRE 96 320 96 288
WIRE 272 320 272 288
WIRE 768 320 768 288
WIRE 1888 320 1888 176
WIRE 1984 320 1984 176
WIRE 1008 336 976 336
WIRE 1440 336 1408 336
WIRE 880 352 848 352
WIRE 1568 352 1536 352
WIRE 1056 368 1056 352
WIRE 1056 368 976 368
WIRE 1360 368 1360 352
WIRE 1440 368 1360 368
WIRE 1056 400 1056 368
WIRE 1104 400 1056 400
WIRE 1168 400 1104 400
WIRE 1312 400 1248 400
WIRE 1360 400 1360 368
WIRE 1360 400 1312 400
WIRE -128 416 -128 304
WIRE -64 416 -128 416
WIRE -336 432 -464 432
WIRE 208 432 160 432
WIRE 256 432 208 432
WIRE 464 432 416 432
WIRE 528 432 464 432
WIRE 848 432 848 352
WIRE 848 432 800 432
WIRE 1056 432 1056 400
WIRE 1360 432 1360 400
WIRE 1568 432 1568 352
WIRE 1616 432 1568 432
WIRE -208 448 -272 448
WIRE -96 448 -96 288
WIRE -96 448 -208 448
WIRE -64 448 -96 448
WIRE 656 448 608 448
WIRE 704 448 656 448
WIRE 1776 448 1712 448
WIRE -336 464 -368 464
WIRE 528 464 512 464
WIRE 848 464 800 464
WIRE 1616 464 1568 464
WIRE 1008 512 976 512
WIRE 1440 512 1408 512
WIRE 848 528 848 464
WIRE 880 528 848 528
WIRE 1568 528 1568 464
WIRE 1568 528 1536 528
WIRE 1056 544 1056 528
WIRE 1056 544 976 544
WIRE 1360 544 1360 528
WIRE 1440 544 1360 544
WIRE -480 560 -528 560
WIRE -368 560 -368 464
WIRE -368 560 -416 560
WIRE 400 560 368 560
WIRE 512 560 512 464
WIRE 512 560 496 560
WIRE 1888 576 1888 384
WIRE 1984 576 1984 400
WIRE 1056 592 1056 544
WIRE 1360 592 1360 544
WIRE 80 672 64 672
WIRE -96 688 -160 688
WIRE 208 688 208 432
WIRE 288 688 208 688
WIRE 432 688 352 688
WIRE 688 688 592 688
WIRE 880 688 688 688
WIRE 80 704 64 704
WIRE 1008 704 960 704
WIRE 1296 704 1008 704
WIRE 1776 704 1776 448
WIRE 1776 704 1360 704
WIRE 880 720 848 720
WIRE 320 752 320 720
WIRE 320 752 256 752
WIRE 736 768 704 768
WIRE 848 768 848 720
WIRE 848 768 832 768
FLAG 1056 592 0
FLAG 768 320 0
FLAG 1888 576 0
FLAG 1968 176 out
FLAG 1008 176 in
FLAG 1104 400 sw1
FLAG 464 432 duty1
FLAG 1984 576 0
FLAG -288 304 out
FLAG 272 320 0
FLAG 256 224 out
FLAG 96 320 0
FLAG 1360 592 0
FLAG 688 688 duty2
FLAG -208 448 ref
FLAG 96 224 duty2
FLAG 1312 400 sw2
FLAG 656 448 pwm1
FLAG 1008 704 pwm2
FLAG 80 672 clk1
FLAG 80 704 clk2
FLAG 368 560 clk1
FLAG 704 768 clk2
SYMBOL voltage 768 192 R0
WINDOW 0 -53 6 Top 2
WINDOW 3 -55 82 Bottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 3.5
SYMBOL ind 1152 416 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=10m
SYMBOL cap 1872 320 R0
SYMATTR InstName C1
SYMATTR Value 22µ
SYMATTR SpiceLine Rser=1m
SYMBOL iGD 928 352 R0
SYMATTR InstName X2
SYMBOL iGD 928 528 R0
SYMATTR InstName X3
SYMBOL DEADTIME 752 448 R0
WINDOW 39 0 73 Bottom 2
SYMATTR InstName X1
SYMBOL res 1968 304 R0
SYMATTR InstName R1
SYMATTR Value 3.3
SYMBOL fra -160 304 R270
WINDOW 0 16 -32 VTop 2
SYMATTR InstName @1
SYMATTR SpiceLine delay=2m fstart=100 fend=100k oct=2 nmax=2 pp0=10m pp1=10m f0=1k f1=100k
SYMBOL fraprobe 192 304 R0
SYMATTR InstName &1plant
SYMBOL fraprobe 0 304 R0
SYMATTR InstName &1comp
SYMBOL CONST 224 752 R0
WINDOW 39 -2 52 Bottom 2
SYMATTR SpiceLine K=0.9
SYMATTR InstName X11
SYMBOL Digital\\inv 1296 640 R0
WINDOW 3 8 60 Left 2
SYMATTR InstName A1
SYMBOL DEADTIME 1664 448 M0
WINDOW 39 -2 72 Bottom 2
SYMATTR InstName X9
SYMBOL iGD 1488 352 M0
SYMATTR InstName X7
SYMBOL iGD 1488 528 M0
SYMATTR InstName X8
SYMBOL SUB 320 688 R0
SYMATTR InstName X10
SYMBOL iNMOS 1056 304 R0
SYMATTR InstName X12
SYMBOL iNMOS 1056 480 R0
SYMATTR InstName X13
SYMBOL iNMOS 1360 304 M0
SYMATTR InstName X14
SYMBOL iNMOS 1360 480 M0
SYMATTR InstName X15
SYMBOL SAW 784 768 R0
WINDOW 3 -1 56 Bottom 2
SYMATTR InstName X17
SYMBOL CMP 928 704 M180
SYMATTR InstName X6
SYMBOL PHASESHIFT -16 688 R0
WINDOW 39 2 74 Bottom 2
SYMATTR SpiceLine freq=1Meg
SYMATTR InstName X4
SYMBOL CONST -192 688 R0
WINDOW 39 -2 52 Bottom 2
SYMATTR SpiceLine K=180
SYMATTR InstName X18
SYMBOL CMP 576 448 M180
SYMATTR InstName X19
SYMBOL SAW 448 560 R0
WINDOW 3 -1 56 Bottom 2
SYMATTR InstName X20
SYMBOL LIMIT 512 688 R0
WINDOW 39 4 75 Bottom 2
SYMATTR InstName X21
SYMBOL LIMIT 336 432 R0
WINDOW 39 4 75 Bottom 2
SYMATTR InstName X22
SYMBOL CONST -496 432 R0
WINDOW 39 3 25 Top 2
SYMATTR SpiceLine K=3.3
SYMATTR InstName X23
SYMBOL PowerSim\\MIN -304 448 R0
SYMATTR InstName X24
SYMBOL PowerSim\\SLOPE -448 560 R0
WINDOW 39 39 57 Bottom 2
SYMATTR SpiceLine se={3.3/2m}
SYMATTR InstName X25
SYMBOL PowerSim\\TIMER -560 560 R0
WINDOW 39 -3 57 Bottom 2
SYMATTR SpiceLine T=1u
SYMATTR InstName X26
SYMBOL TYPE3_gm 48 432 R0
WINDOW 39 4 70 Bottom 2
WINDOW 40 -7 103 Bottom 2
SYMATTR SpiceLine g=0.3 fz1=3k fz2=5k
SYMATTR SpiceLine2 fp1=200k fp2=210k
SYMATTR InstName X16
TEXT -632 -160 Left 2 !.tran 0 3m 0
TEXT -632 -128 Left 2 ;.fra
TEXT -680 -248 Left 5 ;Voltage Mode Buck-Boost Converter
TEXT 1824 -88 Left 2 ;2025-08-31
TEXT -560 848 Left 2 ;2024-12-29      Initial release\n2025-08-24      Changed from PWM to SAW+CMP to enable phase shift between buck and boost.\n2025-08-31      Changed error amp to TYPE2_gm to improve softstart behaviour.
TEXT -632 -56 Left 2 !.options solver="norm"\n.options method="gear"
TEXT -600 352 Left 2 ;softstart
TEXT 120 376 Left 2 ;gm
RECTANGLE Normal -240 624 -624 368 2
