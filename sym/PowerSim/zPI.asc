Version 4
SHEET 1 2928 680
WIRE -272 96 -400 96
WIRE -64 96 -272 96
WIRE 64 96 0 96
WIRE 240 96 128 96
WIRE 432 96 304 96
WIRE 544 96 496 96
WIRE 784 96 704 96
WIRE 848 96 784 96
WIRE -272 256 -272 96
WIRE -224 256 -272 256
WIRE -64 256 -160 256
WIRE 96 256 96 128
WIRE 96 256 0 256
WIRE 464 256 464 128
WIRE 592 256 464 256
WIRE 784 256 784 96
WIRE 784 256 656 256
WIRE -192 368 -192 288
WIRE -192 368 -400 368
WIRE 624 368 624 288
WIRE 624 368 -192 368
FLAG -400 368 clk
IOPIN -400 368 In
FLAG -400 96 in
IOPIN -400 96 In
FLAG 848 96 out
IOPIN 848 96 Out
SYMBOL PowerSim\\GAIN -32 96 R0
WINDOW 39 -4 62 Bottom 2
SYMATTR SpiceLine G={x1}
SYMATTR InstName X1
SYMBOL PowerSim\\GAIN -32 256 R0
WINDOW 39 -4 62 Bottom 2
SYMATTR SpiceLine G={x2}
SYMATTR InstName X2
SYMBOL PowerSim\\LIMIT 624 96 R0
WINDOW 39 5 76 Bottom 2
SYMATTR SpiceLine max={vh} min={vl}
SYMATTR InstName X7
SYMBOL PowerSim\\SUM 464 96 R0
SYMATTR InstName X9
SYMBOL PowerSim\\SAMPLEHOLD -192 256 R0
SYMATTR InstName X10
SYMBOL PowerSim\\SAMPLEHOLD 624 256 M0
SYMATTR InstName X13
SYMBOL PowerSim\\GAIN 272 96 R0
WINDOW 39 -4 62 Bottom 2
SYMATTR SpiceLine G={g}
SYMATTR InstName X3
SYMBOL PowerSim\\SUM 96 96 R0
SYMATTR InstName X4
TEXT -440 -240 Left 2 !.param fs=1Meg\n.param g=1\n.param fz1=1k\n.param vh=5\n.param vl=0
TEXT -456 -304 Left 4 ;Discrete PI Compensator
TEXT -208 -240 Left 2 ;sampling frequency(Hz)\ntarget gain at fz1\nzero frequency(Hz)\nmax ouput voltage(V)\nmin output voltage(V)
TEXT 616 -288 Left 2 ;2025-3-23
TEXT -448 336 Left 2 ;binary
TEXT 232 -112 Left 2 !.param x1={1+(PI*fz1/fs)}\n.param x2={(PI*fz1/fs)-1}
